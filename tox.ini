[tox]
envlist = cov-init, py27, py36, cov-report, linting

[testenv]
usedevelop = true
deps =
    -rrequirements.txt
    pytest
    pytest-cov
# Include any other steps necessary for testing below
commands =
    pytest -vv --cov --cov-report=
setenv =
    COVERAGE_FILE = .coverage.{envname}

[testenv:cov-init]
setenv =
    COVERAGE_FILE = .coverage
deps = coverage
commands =
    coverage erase

[testenv:cov-report]
setenv =
    COVERAGE_FILE = .coverage
deps = coverage
commands =
    coverage combine
    coverage report

[testenv:linting]
deps = flake8
commands = flake8

[flake8]
# Ignore:
# E501: Long lines
# W503: Line breaks before binary operators
ignore = E501, W503
exclude = .git,__pycache__,env,.tox

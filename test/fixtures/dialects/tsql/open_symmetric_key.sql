CREATE PROCEDURE dbo.procedure_name
AS
BEGIN
    SET NOCOUNT ON;

    OPEN SYMMETRIC KEY [Key01]
    DECRYPTION BY CERTIFICATE [Cert];

    SELECT column1 FROM sys.tables;
END;
GO

OPEN SYMMETRIC KEY [Key01] DECRYPTION BY CERTIFICATE [Cert];
OPEN SYMMETRIC KEY [Key01] DECRYPTION BY CERTIFICATE [Cert] WITH PASSWORD = 'testPass123';

OPEN SYMMETRIC KEY [Key01] DECRYPTION BY ASYMMETRIC KEY [asym_key];
OPEN SYMMETRIC KEY [Key01] DECRYPTION BY ASYMMETRIC KEY [asym_key] WITH PASSWORD = 'testPass123';

OPEN SYMMETRIC KEY [Key01] DECRYPTION BY SYMMETRIC KEY [sym_key];
OPEN SYMMETRIC KEY [Key01] DECRYPTION BY PASSWORD = 'decryptPass123';

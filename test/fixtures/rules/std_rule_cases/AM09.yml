rule: AM09

test_fail_limit_without_order_by:
  fail_str: |
    SELECT *
    FROM foo
    LIMIT 10;

test_fail_offset_without_order_by:
  fail_str: |
    SELECT *
    FROM foo
    OFFSET 5;

test_fail_limit_and_offset_without_order_by:
  fail_str: |
    SELECT *
    FROM foo
    LIMIT 10 OFFSET 5;

test_pass_limit_with_order_by:
  pass_str: |
    SELECT *
    FROM foo
    ORDER BY id
    LIMIT 10;

test_pass_offset_with_order_by:
  pass_str: |
    SELECT *
    FROM foo
    ORDER BY id
    OFFSET 5;

test_pass_limit_and_offset_with_order_by:
  pass_str: |
    SELECT *
    FROM foo
    ORDER BY id
    LIMIT 10 OFFSET 5;

test_pass_no_limit_or_offset:
  pass_str: |
    SELECT *
    FROM foo;

test_fail_limit_with_order_by_in_subquery:
  fail_str: |
    SELECT *
    FROM (
        SELECT *
        FROM foo
        LIMIT 10
    ) subquery;

test_pass_limit_with_order_by_in_subquery:
  pass_str: |
    SELECT *
    FROM (
        SELECT *
        FROM foo
        ORDER BY id
        LIMIT 10
    ) subquery;